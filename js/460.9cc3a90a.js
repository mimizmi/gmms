"use strict";(self["webpackChunkgdmu_mentor_selection"]=self["webpackChunkgdmu_mentor_selection"]||[]).push([[460],{1241:function(e,a){a.A=(e,a)=>{const l=e.__vccOpts||e;for(const[t,n]of a)l[t]=n;return l}},8298:function(e,a,l){l.d(a,{Q:function(){return n}});var t=l(5720);function n(){return(0,t.A)({url:"/api/Major/get-all",method:"get"})}},1460:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});l(8992),l(4520);var t=l(6768),n=l(144),u=l(4232),o=l(9942),r=l(8298),i=l(1219),d=l(2933),c=l(7477);const s={class:"teacher-manage"},m={class:"filter-section"},_={class:"filter-content"},p={class:"filter-actions"},f={class:"pagination"};var k={__name:"teacher-manage",setup(e){const a=(0,n.KR)(!1),l=(0,n.KR)(!1),k=(0,n.KR)([]),b=(0,n.KR)([]),v=(0,n.KR)(!1),g=(0,n.KR)(!1),h=(0,n.KR)(null),F=(0,n.Kh)({major:"",keyword:""}),y=(0,n.KR)(1),w=(0,n.KR)(10),j=(0,n.Kh)({tea_id:"",tea_name:"",tea_mjr:[],tea_phone:"",tea_info:""}),C={tea_name:[{required:!0,message:"请输入教师姓名",trigger:"blur"}],tea_mjr:[{required:!0,message:"请选择至少一个专业",trigger:"change"}],tea_phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]},V=(0,t.EW)((()=>{let e=[...k.value];if(F.major&&(e=e.filter((e=>e.tea_mjr.includes(F.major)))),F.keyword){const a=F.keyword.toLowerCase();e=e.filter((e=>e.tea_name.toLowerCase().includes(a)))}return e})),W=(0,t.EW)((()=>{const e=(y.value-1)*w.value,a=e+w.value;return V.value.slice(e,a)})),x=async()=>{a.value=!0;try{const[e,a]=await Promise.all([(0,o.x0)(),(0,r.Q)()]);k.value=e,b.value=a}catch(e){i.nk.error("获取数据失败")}finally{a.value=!1}},R=()=>{y.value=1},K=()=>{F.major="",F.keyword="",y.value=1},L=()=>{g.value=!1,Object.assign(j,{tea_id:"",tea_name:"",tea_mjr:[],tea_phone:"",tea_info:""}),v.value=!0},U=e=>{g.value=!0,Object.assign(j,e),v.value=!0},z=async()=>{if(h.value)try{await h.value.validate(),l.value=!0;const e={tea_name:j.tea_name,tea_mjr:j.tea_mjr,tea_phone:j.tea_phone||"",tea_info:j.tea_info||""};g.value?(await(0,o.Ig)(j.tea_id,e),i.nk.success("修改成功")):(await(0,o.Yw)(e),i.nk.success("添加成功")),v.value=!1,x()}catch(e){i.nk.error(e.message||(g.value?"修改失败":"添加失败"))}finally{l.value=!1}},X=e=>{w.value=e,y.value=1},E=e=>{y.value=e},I=async e=>{try{await d.s.confirm(`确定要将教师 ${e.tea_name} 的密码重置为 gdmu 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await(0,o.z4)(e.tea_id,"gdmu"),i.nk.success("密码重置成功")}catch(a){"cancel"!==a&&i.nk.error("密码重置失败")}},B=async e=>{try{await d.s.confirm(`确定要删除教师 ${e.tea_name} 吗？此操作不可恢复！`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await(0,o.qg)(e.tea_id),i.nk.success("删除成功"),x()}catch(a){"cancel"!==a&&i.nk.error("删除失败")}};return(0,t.sV)((()=>{x()})),(e,o)=>{const r=(0,t.g2)("el-option"),i=(0,t.g2)("el-select"),d=(0,t.g2)("el-form-item"),k=(0,t.g2)("el-icon"),T=(0,t.g2)("el-input"),q=(0,t.g2)("el-button"),A=(0,t.g2)("el-form"),O=(0,t.g2)("el-table-column"),S=(0,t.g2)("el-tag"),$=(0,t.g2)("el-table"),P=(0,t.g2)("el-pagination"),Q=(0,t.g2)("el-dialog"),D=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",s,[o[19]||(o[19]=(0,t.Lk)("div",{class:"page-header"},[(0,t.Lk)("h2",null,"教师管理"),(0,t.Lk)("div",{class:"header-desc"},"管理所有教师信息，支持修改信息和添加教师")],-1)),(0,t.Lk)("div",m,[(0,t.bF)(A,{inline:!0,model:F,class:"filter-form"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",_,[(0,t.bF)(d,{label:"专业"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:F.major,"onUpdate:modelValue":o[0]||(o[0]=e=>F.major=e),clearable:"",placeholder:"选择专业",style:{width:"240px"}},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(b.value,(e=>((0,t.uX)(),(0,t.Wv)(r,{key:e.mjr_id,label:e.mjr_name,value:e.mjr_name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(d,{label:"搜索"},{default:(0,t.k6)((()=>[(0,t.bF)(T,{modelValue:F.keyword,"onUpdate:modelValue":o[1]||(o[1]=e=>F.keyword=e),placeholder:"搜索教师姓名",clearable:"",style:{width:"200px"}},{prefix:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(c.vji))])),_:1})])),_:1},8,["modelValue"])])),_:1})]),(0,t.Lk)("div",p,[(0,t.bF)(d,{class:"flex-auto"},{default:(0,t.k6)((()=>[(0,t.bF)(q,{type:"primary",onClick:R},{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(c.vji))])),_:1}),o[10]||(o[10]=(0,t.eW)(" 搜索 "))])),_:1}),(0,t.bF)(q,{type:"success",onClick:K},{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(c.C42))])),_:1}),o[11]||(o[11]=(0,t.eW)(" 重置筛选 "))])),_:1}),(0,t.bF)(q,{type:"primary",onClick:x},{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(c.C42))])),_:1}),o[12]||(o[12]=(0,t.eW)(" 刷新数据 "))])),_:1})])),_:1}),(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{type:"success",onClick:L},{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)((0,n.R1)(c.FWt))])),_:1}),o[13]||(o[13]=(0,t.eW)(" 添加教师 "))])),_:1})])),_:1})])])),_:1},8,["model"])]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)($,{data:W.value,stripe:"",style:{width:"100%"},"header-cell-style":{background:"#fafafa",color:"#606266",fontWeight:600},"cell-style":{padding:"12px 0",fontSize:"14px"},border:""},{default:(0,t.k6)((()=>[(0,t.bF)(O,{prop:"tea_id",label:"ID",width:"80"}),(0,t.bF)(O,{prop:"tea_name",label:"姓名",width:"120"}),(0,t.bF)(O,{label:"所属专业","min-width":"200"},{default:(0,t.k6)((({row:e})=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.tea_mjr,(e=>((0,t.uX)(),(0,t.Wv)(S,{key:e,style:{"margin-right":"4px"}},{default:(0,t.k6)((()=>[(0,t.eW)((0,u.v_)(e),1)])),_:2},1024)))),128))])),_:1}),(0,t.bF)(O,{prop:"tea_phone",label:"联系方式",width:"120"}),(0,t.bF)(O,{prop:"tea_info",label:"个人介绍","min-width":"200","show-overflow-tooltip":""}),(0,t.bF)(O,{label:"操作",width:"200",fixed:"right"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(q,{type:"primary",link:"",onClick:a=>U(e)},{default:(0,t.k6)((()=>o[14]||(o[14]=[(0,t.eW)(" 编辑 ")]))),_:2},1032,["onClick"]),(0,t.bF)(q,{type:"warning",link:"",onClick:a=>I(e)},{default:(0,t.k6)((()=>o[15]||(o[15]=[(0,t.eW)(" 重置密码 ")]))),_:2},1032,["onClick"]),(0,t.bF)(q,{type:"danger",link:"",onClick:a=>B(e)},{default:(0,t.k6)((()=>o[16]||(o[16]=[(0,t.eW)(" 删除 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[D,a.value]]),(0,t.Lk)("div",f,[(0,t.bF)(P,{"current-page":y.value,"onUpdate:currentPage":o[2]||(o[2]=e=>y.value=e),"page-size":w.value,"onUpdate:pageSize":o[3]||(o[3]=e=>w.value=e),total:V.value.length,"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:X,onCurrentChange:E},null,8,["current-page","page-size","total"])]),(0,t.bF)(Q,{modelValue:v.value,"onUpdate:modelValue":o[9]||(o[9]=e=>v.value=e),title:g.value?"编辑教师信息":"添加教师",width:"50%"},{footer:(0,t.k6)((()=>[(0,t.bF)(q,{onClick:o[8]||(o[8]=e=>v.value=!1)},{default:(0,t.k6)((()=>o[17]||(o[17]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(q,{type:"primary",onClick:z,loading:l.value},{default:(0,t.k6)((()=>o[18]||(o[18]=[(0,t.eW)(" 确定 ")]))),_:1},8,["loading"])])),default:(0,t.k6)((()=>[(0,t.bF)(A,{ref_key:"formRef",ref:h,model:j,rules:C,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{label:"姓名",prop:"tea_name"},{default:(0,t.k6)((()=>[(0,t.bF)(T,{modelValue:j.tea_name,"onUpdate:modelValue":o[4]||(o[4]=e=>j.tea_name=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(d,{label:"所属专业",prop:"tea_mjr"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:j.tea_mjr,"onUpdate:modelValue":o[5]||(o[5]=e=>j.tea_mjr=e),multiple:"",style:{width:"100%"},placeholder:"请选择专业"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(b.value,(e=>((0,t.uX)(),(0,t.Wv)(r,{key:e.mjr_id,label:e.mjr_name,value:e.mjr_name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(d,{label:"联系方式",prop:"tea_phone"},{default:(0,t.k6)((()=>[(0,t.bF)(T,{modelValue:j.tea_phone,"onUpdate:modelValue":o[6]||(o[6]=e=>j.tea_phone=e)},null,8,["modelValue"])])),_:1}),(0,t.bF)(d,{label:"个人介绍",prop:"tea_info"},{default:(0,t.k6)((()=>[(0,t.bF)(T,{modelValue:j.tea_info,"onUpdate:modelValue":o[7]||(o[7]=e=>j.tea_info=e),type:"textarea",rows:4,placeholder:"请输入个人介绍"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}},b=l(1241);const v=(0,b.A)(k,[["__scopeId","data-v-969233da"]]);var g=v}}]);
//# sourceMappingURL=460.9cc3a90a.js.map