"use strict";(self["webpackChunkgdmu_mentor_selection"]=self["webpackChunkgdmu_mentor_selection"]||[]).push([[142],{1241:function(e,l){l.A=(e,l)=>{const a=e.__vccOpts||e;for(const[u,t]of l)a[u]=t;return a}},4267:function(e,l,a){a.d(l,{O:function(){return t}});var u=a(5720);function t(){return(0,u.A)({url:"/api/Grade/get-all",method:"get"})}},6142:function(e,l,a){a.r(l),a.d(l,{default:function(){return L}});a(8992),a(4520),a(1454);var u=a(6768),t=a(144),o=a(4232),r=a(8500),n=a(9942),s=a(3555),d=a(4267),c=a(1219),i=a(7477),v=a(1387);const _={class:"my-groups"},p={class:"bar-container"},g={class:"filter-area"},k={class:"group-list"},b={class:"card-header"},f={class:"group-name"},m={class:"card-content"},y={class:"group-title"},F={class:"group-info"},h={class:"group-meta"},C={class:"card-footer"};var w={__name:"my-groups",setup(e){const l=(0,r.k)(),a=(0,t.KR)(!1),w=(0,t.KR)(!1),W=(0,t.KR)([]),K=(0,t.KR)(""),L=(0,t.KR)(!1),X=(0,t.KR)(null),R=(0,t.KR)([]),E=(0,t.KR)([]),V=async()=>{try{const e=await(0,d.O)();E.value=e.map((e=>e.gde_value))}catch(e){console.error("获取年级列表失败:",e),c.nk.error("获取年级列表失败")}},I=async e=>{if(l.userInfo){a.value=!0;try{const a=await(0,n.xx)(l.userInfo.tea_id,e),u=await Promise.all((a||[]).map((async e=>{try{const l=await(0,s.Qo)(e);return l}catch(l){return console.error("获取小组详情失败:",l),null}})));W.value=u.filter((e=>null!==e))}catch(u){console.error("获取小组列表失败:",u),c.nk.error("获取小组列表失败"),W.value=[]}finally{a.value=!1}}},Q=async e=>{X.value=e,w.value=!0;try{const[l,a]=await Promise.all([(0,s.Qo)(e.group_id),(0,s.kQ)(e.group_id)]);Object.assign(X.value,l),R.value=a,L.value=!0}catch(l){c.nk.error("获取小组详情失败")}finally{w.value=!1}},O=e=>{I(e)},q=()=>{I(K.value)},z=()=>{X.value=null,R.value=[]},A=(0,v.lq)();return(0,u.sV)((async()=>{await V(),A.query.grade?(K.value=A.query.grade,I(K.value)):E.value.length&&(K.value=E.value[0],I(K.value))})),(e,l)=>{const r=(0,u.g2)("el-option"),n=(0,u.g2)("el-select"),s=(0,u.g2)("el-icon"),d=(0,u.g2)("el-button"),c=(0,u.g2)("el-card"),v=(0,u.g2)("el-empty"),V=(0,u.g2)("el-tag"),I=(0,u.g2)("el-col"),A=(0,u.g2)("el-row"),j=(0,u.g2)("el-descriptions-item"),x=(0,u.g2)("el-descriptions"),P=(0,u.g2)("el-table-column"),U=(0,u.g2)("el-table"),G=(0,u.g2)("el-dialog"),N=(0,u.gN)("loading");return(0,u.uX)(),(0,u.CE)("div",_,[(0,u.bF)(c,{class:"action-bar"},{default:(0,u.k6)((()=>[(0,u.Lk)("div",p,[l[3]||(l[3]=(0,u.Lk)("div",{class:"bar-title"},[(0,u.Lk)("h2",null,"我的小组")],-1)),(0,u.Lk)("div",g,[(0,u.bF)(n,{modelValue:K.value,"onUpdate:modelValue":l[0]||(l[0]=e=>K.value=e),placeholder:"选择年级",clearable:"",onChange:O,disabled:a.value},{default:(0,u.k6)((()=>[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(E.value,(e=>((0,u.uX)(),(0,u.Wv)(r,{key:e,label:`${e}级`,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"]),(0,u.bF)(d,{onClick:q,loading:a.value},{default:(0,u.k6)((()=>[(0,u.bF)(s,null,{default:(0,u.k6)((()=>[(0,u.bF)((0,t.R1)(i.C42))])),_:1}),l[2]||(l[2]=(0,u.eW)(" 刷新 "))])),_:1},8,["loading"])])])])),_:1}),(0,u.bo)(((0,u.uX)(),(0,u.CE)("div",k,[W.value.length?((0,u.uX)(),(0,u.Wv)(A,{key:1,gutter:20},{default:(0,u.k6)((()=>[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(W.value,(e=>((0,u.uX)(),(0,u.Wv)(I,{span:8,key:e.group_id},{default:(0,u.k6)((()=>[(0,u.bF)(c,{class:"group-card",shadow:"hover"},{header:(0,u.k6)((()=>[(0,u.Lk)("div",b,[(0,u.Lk)("span",f,(0,o.v_)(e.group_name),1),(0,u.bF)(V,{size:"small",type:"success"},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(e.group_id)+"号小组",1)])),_:2},1024)])])),default:(0,u.k6)((()=>[(0,u.Lk)("div",m,[(0,u.Lk)("h4",y,(0,o.v_)(e.group_title),1),(0,u.Lk)("p",F,(0,o.v_)(e.group_info),1),(0,u.Lk)("div",h,[(0,u.bF)(V,{size:"small"},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(e.major),1)])),_:2},1024),(0,u.bF)(V,{size:"small",type:"info"},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(e.grade)+"级",1)])),_:2},1024)]),(0,u.Lk)("div",C,[(0,u.bF)(d,{type:"primary",link:"",onClick:l=>Q(e)},{default:(0,u.k6)((()=>l[4]||(l[4]=[(0,u.eW)(" 查看详情 ")]))),_:2},1032,["onClick"])])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):((0,u.uX)(),(0,u.Wv)(v,{key:0,description:"暂无分配的小组"}))])),[[N,a.value]]),(0,u.bF)(G,{modelValue:L.value,"onUpdate:modelValue":l[1]||(l[1]=e=>L.value=e),title:"小组详情",width:"50%",onClosed:z},{default:(0,u.k6)((()=>[(0,u.bo)(((0,u.uX)(),(0,u.CE)("div",null,[X.value?((0,u.uX)(),(0,u.CE)(u.FK,{key:0},[(0,u.bF)(x,{column:2,border:""},{default:(0,u.k6)((()=>[(0,u.bF)(j,{label:"小组名称"},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(X.value.group_name),1)])),_:1}),(0,u.bF)(j,{label:"小组编号"},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(X.value.group_id),1)])),_:1}),(0,u.bF)(j,{label:"选题"},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(X.value.group_title),1)])),_:1}),(0,u.bF)(j,{label:"描述",class:"group-description"},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(X.value.group_info),1)])),_:1})])),_:1}),R.value.length?((0,u.uX)(),(0,u.CE)(u.FK,{key:0},[l[5]||(l[5]=(0,u.Lk)("h4",{class:"member-title"},"小组成员",-1)),(0,u.bF)(U,{data:R.value,stripe:"",style:{width:"100%"}},{default:(0,u.k6)((()=>[(0,u.bF)(P,{prop:"stu_name",label:"姓名"}),(0,u.bF)(P,{prop:"stu_num",label:"学号"}),(0,u.bF)(P,{prop:"stu_cls",label:"班级"}),(0,u.bF)(P,{prop:"stu_phone",label:"联系方式"}),(0,u.bF)(P,{label:"身份"},{default:(0,u.k6)((e=>[(0,u.bF)(V,{type:e.row.stu_lead?"success":""},{default:(0,u.k6)((()=>[(0,u.eW)((0,o.v_)(e.row.stu_lead?"组长":"组员"),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data"])],64)):(0,u.Q3)("",!0)],64)):(0,u.Q3)("",!0)])),[[N,w.value]])])),_:1},8,["modelValue"])])}}},W=a(1241);const K=(0,W.A)(w,[["__scopeId","data-v-f307f942"]]);var L=K}}]);
//# sourceMappingURL=142.ff4b7900.js.map