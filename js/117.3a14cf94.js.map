{"version":3,"file":"js/117.3a14cf94.js","mappings":"uIAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,qECNV,SAASI,IACd,OAAOC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,qBACLC,OAAQ,OAEZ,C,0bCwDA,MAAMC,GAAYC,EAAAA,EAAAA,KACZC,GAASC,EAAAA,EAAAA,MACTC,GAAUC,EAAAA,EAAAA,KAAI,GACdC,GAAaD,EAAAA,EAAAA,IAAI,IAGjBE,EAAWC,UACfJ,EAAQK,OAAQ,EAChB,IACE,MAAMC,QAAed,EAAAA,EAAAA,KACfe,QAAcC,QAAQC,IAC1BH,EAAOI,KAAIN,UACT,MAAMO,QAAeC,EAAAA,EAAAA,IAAiBhB,EAAUiB,SAASC,OAAQC,EAAMC,WACvE,MAAO,CACLD,MAAOA,EAAMC,UACbC,OAAQN,GAAU,IAAIO,OACvB,KAGLhB,EAAWG,MAAQE,EAAMY,MAAK,CAACC,EAAGC,IAAMA,EAAEN,MAAQK,EAAEL,OACtD,CAAE,MAAOO,GACPC,QAAQD,MAAM,YAAaA,GAC3BE,EAAAA,GAAUF,MAAM,WAClB,CAAE,QACAtB,EAAQK,OAAQ,CAClB,GAIIoB,EAAeA,KACnBtB,GAAU,EAINuB,EAAqBX,IACzBjB,EAAO6B,KAAK,CACVC,KAAM,qBACNC,MAAO,CAAEd,UACT,E,OAGJe,EAAAA,EAAAA,KAAU,KACR3B,GAAU,I,kpECpGZ,MAAM4B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://gdmu-mentor-selection/./node_modules/vue-loader/dist/exportHelper.js","webpack://gdmu-mentor-selection/./src/api/grade.js","webpack://gdmu-mentor-selection/./src/views/teacher/teacher-dashboard.vue","webpack://gdmu-mentor-selection/./src/views/teacher/teacher-dashboard.vue?d3b8"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import request from '@/utils/request'\r\n\r\n// 获取所有年级\r\nexport function getAllGrades() {\r\n  return request({\r\n    url: '/api/Grade/get-all',\r\n    method: 'get'\r\n  })\r\n} ","<template>\r\n  <div class=\"dashboard\">\r\n    <!-- 个人信息卡片 -->\r\n    <el-card class=\"info-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span class=\"title\">\r\n            <el-icon><UserFilled /></el-icon>\r\n            个人信息\r\n          </span>\r\n          <el-button type=\"primary\" link @click=\"router.push('/teacher/settings')\">\r\n            <el-icon><Setting /></el-icon>\r\n            修改信息\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n      <el-descriptions :column=\"2\" border>\r\n        <el-descriptions-item label=\"姓名\">{{ userStore.userInfo?.tea_name }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"联系方式\">{{ userStore.userInfo?.tea_phone }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"所属专业\">{{ userStore.userInfo?.tea_mjr?.join('、') }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"个人介绍\">{{ userStore.userInfo?.tea_info || '暂无介绍' }}</el-descriptions-item>\r\n      </el-descriptions>\r\n    </el-card>\r\n\r\n    <!-- 预选统计卡片 -->\r\n    <el-card class=\"stats-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span class=\"title\">\r\n            <el-icon><DataLine /></el-icon>\r\n            小组统计\r\n          </span>\r\n          <el-button type=\"primary\" link @click=\"refreshStats\">\r\n            <el-icon><Refresh /></el-icon>\r\n            刷新\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n      <div class=\"stats-content\" v-loading=\"loading\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"8\" v-for=\"(stat, index) in gradeStats\" :key=\"index\">\r\n            <div class=\"stat-item\" @click=\"viewGroupsByGrade(stat.grade)\" style=\"cursor: pointer\">\r\n              <div class=\"stat-header\">{{ stat.grade }}级</div>\r\n              <div class=\"stat-body\">\r\n                <div class=\"stat-number\">{{ stat.count }}</div>\r\n                <div class=\"stat-label\">已分配小组</div>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useUserStore } from '@/store/modules/user'\r\nimport { getTeacherGroups } from '@/api/teacher'\r\nimport { getAllGrades } from '@/api/grade'\r\nimport { ElMessage } from 'element-plus'\r\nimport { UserFilled, DataLine, Refresh, Setting } from '@element-plus/icons-vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst userStore = useUserStore()\r\nconst router = useRouter()\r\nconst loading = ref(false)\r\nconst gradeStats = ref([])\r\n\r\n// 获取预选统计\r\nconst getStats = async () => {\r\n  loading.value = true\r\n  try {\r\n    const grades = await getAllGrades()\r\n    const stats = await Promise.all(\r\n      grades.map(async (grade) => {\r\n        const groups = await getTeacherGroups(userStore.userInfo.tea_id, grade.gde_value)\r\n        return {\r\n          grade: grade.gde_value,\r\n          count: (groups || []).length\r\n        }\r\n      })\r\n    )\r\n    gradeStats.value = stats.sort((a, b) => b.grade - a.grade)\r\n  } catch (error) {\r\n    console.error('获取统计信息失败:', error)\r\n    ElMessage.error('获取统计信息失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 刷新统计\r\nconst refreshStats = () => {\r\n  getStats()\r\n}\r\n\r\n// 查看指定年级的小组\r\nconst viewGroupsByGrade = (grade) => {\r\n  router.push({\r\n    path: '/teacher/my-groups',\r\n    query: { grade }\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  getStats()\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard {\r\n  .info-card,\r\n  .stats-card {\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .card-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n\r\n    .title {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n      font-size: 16px;\r\n      font-weight: bold;\r\n      color: #1890ff;\r\n    }\r\n  }\r\n\r\n  .stats-content {\r\n    padding: 20px 0;\r\n\r\n    .stat-item {\r\n      background: #f8f9fa;\r\n      border-radius: 8px;\r\n      padding: 20px;\r\n      text-align: center;\r\n      transition: all 0.3s;\r\n\r\n      &:hover {\r\n        transform: translateY(-5px);\r\n        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n      }\r\n\r\n      .stat-header {\r\n        font-size: 16px;\r\n        color: #666;\r\n        margin-bottom: 15px;\r\n      }\r\n\r\n      .stat-body {\r\n        .stat-number {\r\n          font-size: 28px;\r\n          font-weight: bold;\r\n          color: #1890ff;\r\n          margin-bottom: 5px;\r\n        }\r\n\r\n        .stat-label {\r\n          font-size: 14px;\r\n          color: #999;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style> ","import script from \"./teacher-dashboard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./teacher-dashboard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./teacher-dashboard.vue?vue&type=style&index=0&id=11ebb5d6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-11ebb5d6\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","getAllGrades","request","url","method","userStore","useUserStore","router","useRouter","loading","ref","gradeStats","getStats","async","value","grades","stats","Promise","all","map","groups","getTeacherGroups","userInfo","tea_id","grade","gde_value","count","length","sort","a","b","error","console","ElMessage","refreshStats","viewGroupsByGrade","push","path","query","onMounted","__exports__"],"sourceRoot":""}