"use strict";(self["webpackChunkgdmu_mentor_selection"]=self["webpackChunkgdmu_mentor_selection"]||[]).push([[584],{1241:function(e,l){l.A=(e,l)=>{const a=e.__vccOpts||e;for(const[r,o]of l)a[r]=o;return a}},6584:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});a(4114);var r=a(6768),o=a(144),t=a(8500),u=a(9942),d=a(1219),s=a(2933),n=a(1419),i=a(1387);const f={class:"settings"};var m={__name:"teacher-settings",setup(e){const l=(0,t.k)(),a=(0,i.rd)(),m=(0,o.KR)(!1),b=(0,o.KR)(!1),p=(0,o.KR)(!1),c=(0,o.KR)(null),_=(0,o.KR)(null),g=["信息管理与信息系统","工商管理","市场营销","会计学","财务管理"],w=(0,o.Kh)({...l.userInfo}),k={tea_phone:[{required:!0,message:"请输入联系方式",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],tea_info:[{max:200,message:"个人介绍不能超过200个字符",trigger:"blur"}],tea_mjr:[{required:!0,message:"请选择至少一个专业",trigger:"change"}]},v=(0,o.Kh)({newPassword:"",confirmPassword:""}),F={newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:(e,l,a)=>{l!==v.newPassword?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}]},h=()=>{p.value=!0},y=()=>{p.value=!1,Object.assign(w,l.userInfo)},V=async()=>{if(c.value)try{await c.value.validate(),m.value=!0;const e=await(0,u.sc)(l.userInfo.tea_id,w);d.nk.success("修改成功"),l.userInfo=e,(0,n.TV)("userInfo",JSON.stringify(e)),p.value=!1}catch(e){d.nk.error("修改失败")}finally{m.value=!1}},P=async()=>{if(_.value)try{await _.value.validate(),b.value=!0,await(0,u.JV)(l.userInfo.tea_id,v.newPassword),v.newPassword="",v.confirmPassword="",_.value.resetFields(),await s.s.alert("密码修改成功，系统将自动退出以确保安全，请使用新密码重新登录。","提示",{type:"success",showClose:!1,confirmButtonText:"确定"}),l.logout(),a.push("/teacher/login")}catch(e){d.nk.error("密码修改失败")}finally{b.value=!1}},C=(0,o.KR)("info");return(e,l)=>{const a=(0,r.g2)("el-input"),o=(0,r.g2)("el-form-item"),t=(0,r.g2)("el-option"),u=(0,r.g2)("el-select"),d=(0,r.g2)("el-button"),s=(0,r.g2)("el-form"),n=(0,r.g2)("el-tab-pane"),i=(0,r.g2)("el-tabs"),K=(0,r.g2)("el-card");return(0,r.uX)(),(0,r.CE)("div",f,[(0,r.bF)(K,null,{header:(0,r.k6)((()=>l[7]||(l[7]=[(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h3",null,"个人设置")],-1)]))),default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:C.value,"onUpdate:modelValue":l[6]||(l[6]=e=>C.value=e)},{default:(0,r.k6)((()=>[(0,r.bF)(n,{label:"信息设置",name:"info"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{ref_key:"infoFormRef",ref:c,model:w,rules:k,"label-width":"100px"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{label:"姓名"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{modelValue:w.tea_name,"onUpdate:modelValue":l[0]||(l[0]=e=>w.tea_name=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,r.bF)(o,{label:"联系方式",prop:"tea_phone"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{modelValue:w.tea_phone,"onUpdate:modelValue":l[1]||(l[1]=e=>w.tea_phone=e),disabled:!p.value},null,8,["modelValue","disabled"])])),_:1}),(0,r.bF)(o,{label:"个人介绍",prop:"tea_info"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{modelValue:w.tea_info,"onUpdate:modelValue":l[2]||(l[2]=e=>w.tea_info=e),type:"textarea",rows:4,placeholder:"请输入个人介绍",disabled:!p.value},null,8,["modelValue","disabled"])])),_:1}),(0,r.bF)(o,{label:"所属专业"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{modelValue:w.tea_mjr,"onUpdate:modelValue":l[3]||(l[3]=e=>w.tea_mjr=e),multiple:"",placeholder:"请选择专业",style:{width:"100%"},disabled:""},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(g,(e=>(0,r.bF)(t,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(o,null,{default:(0,r.k6)((()=>[p.value?((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.bF)(d,{onClick:y},{default:(0,r.k6)((()=>l[9]||(l[9]=[(0,r.eW)("取消")]))),_:1}),(0,r.bF)(d,{type:"primary",onClick:V,loading:m.value},{default:(0,r.k6)((()=>l[10]||(l[10]=[(0,r.eW)(" 保存 ")]))),_:1},8,["loading"])],64)):((0,r.uX)(),(0,r.Wv)(d,{key:0,type:"primary",onClick:h},{default:(0,r.k6)((()=>l[8]||(l[8]=[(0,r.eW)(" 修改信息 ")]))),_:1}))])),_:1})])),_:1},8,["model"])])),_:1}),(0,r.bF)(n,{label:"密码设置",name:"password"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{ref_key:"passwordFormRef",ref:_,model:v,rules:F,"label-width":"100px"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{label:"新密码",prop:"newPassword"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{modelValue:v.newPassword,"onUpdate:modelValue":l[4]||(l[4]=e=>v.newPassword=e),type:"password","show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"])])),_:1}),(0,r.bF)(o,{label:"确认密码",prop:"confirmPassword"},{default:(0,r.k6)((()=>[(0,r.bF)(a,{modelValue:v.confirmPassword,"onUpdate:modelValue":l[5]||(l[5]=e=>v.confirmPassword=e),type:"password","show-password":"",placeholder:"请再次输入新密码"},null,8,["modelValue"])])),_:1}),(0,r.bF)(o,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,{type:"primary",onClick:P,loading:b.value},{default:(0,r.k6)((()=>l[11]||(l[11]=[(0,r.eW)(" 修改密码 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}},b=a(1241);const p=(0,b.A)(m,[["__scopeId","data-v-64eff9e0"]]);var c=p}}]);
//# sourceMappingURL=584.73067848.js.map